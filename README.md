# Prog_project

## О составе репозитория

Основной файл $-$ __Project.py__ (программа с интерфейсом).

__Project_simplified.py__ $-$ упрощенная версия без интерфейса.

Создание корпусов является отдельной и времязатратной частью программы, а потому помещено в файл __Corpora.py__.

Для тестирования консольной или оконной реализации программы можно использовать уже готовые корпуса, которые есть в списке файлов (__Latvian_corpus.txt__ и __Lithuanian_corpus.txt__).

Различные sample-файлы специально подготовлены для теста. Русский sample нужен для демонстрации работы программы в случае загрузки файла не на литовском или латышском. Чтобы проверить точность программы, можно зайти в список опечаток. Там прописаны пары словоформ в следующем виде: "правильная -- неправильная (которая дана в sample)". Если по поиску второй словоформы из этой пары 0 вхождений, то все хорошо. Если вместо нее первая словоформа $-$ программа сработала максимально точно.


## Корпуса

С помощью модуля _datasets_ загружаются бэкапы википедии отдельно на литовском и латышском языках.

Функция _create_wordlist_ обрабатывает уже загруженные данные:
*	Объединяет тексты статей, содержащиеся до этого в строковом виде в списке;
*	Удаляет цифры, пунктуацию и прочие небуквенные символы (нормальными словоформами считаются те, которые соответствуют регулярному выражению: более одного символа из алфавита данного языка) ;
*	Преобразует список словоформ во множество;
*	Наконец, полученные токены записываются в файл с соответствующим названием.

## Интерфейс

Реализация на данный момент $−$ это окно фиксированного размера с приветственным словом и первичными инструкциями (в тексте реализованы переносы).

Импортируя классы из _PyQt6_, мы работаем с уже готовыми объектами. Вопрос в их кастомизации и сочетании этих объектов, среди которых основное окно (и меню в нем), окно сообщения и кнопки.

При запуске кода у нас имеется основное окно с заголовком. В окне текст с первичными инструкцими и nребованиями к файлу. Имеется меню с кнопками.

В разделе «Mode» приведены режимы работы: замена и выделение (раздел, посвященный выделению предлагает кнопки с типами маркеров: курсивным или полужирным шрифтом). Если навести мышку на кнопки, внизу окна появляется плашка, дублирующая содержание текста на кнопке ~(понты, бессмысленные и беспощадные)~. При нажатии на любую из кнопок открывается окно выбора текстового файла для обработки. Неоходимо нажать на файл и дождаться появления диалогового окна, сообщающего об успешном завершении проверки правописания текста.

В случае загрузки файла на каком-либо языке, кроме литовского и латышского пользователь видит всплывающее окно с сообщением об ошибке.

Справка располагается в разделе «Help». Она во многом дублирует содержание приветственного слова в основном окне. Чтобы закрыть справку, можно просто нажать на кнопку «Ок».

## Проверка правописания

После токенизации текста из пользовательского файла программа проверяет каждую полученную единицу. Если слово написано неправильно, реализуется в зависимости от выбора пользователя одна из функций: _replace_with_correct_ или _indicate_wrong_.

Как работает функция _replace_with_correct_ (сплошная машинная замена):
1.	Считает расстояние Дамерау-Левенштейна (первый аргумент $-$ токен с опечаткой, второй $-$ словоформа в корпусе);
2.	Добавляет в словарь пару: ключ $-$ словоформа из корпуса, значение $-$ расстояние;
3.	Из значений словаря находится минимальное значение;
4.	На основе минимального расстояния формируется список оптимальных кандидатов для замены (ключей);
5.	Токен заменяется на первого в списке кандидата.


Как работает функция _indicate_wrong_ (подсветка опечаток в markdown-разметке):
1.	Вне функции пользователь выбирает тип выделения (полужирный или курсив);
2.	Внутри тела функции создается форматированная строка, включающая в себя неправильное слово и обрамление в виде необходимых маркеров того или иного типа выделения;
3.	Полученная строка записывается в md-файл.
